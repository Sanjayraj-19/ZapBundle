<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="styles.css">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ZapBundle - Survey</title>
  <style>
    :root {
      --zapblue: #1ad1ff;
      --zapdark: #0056b3;
      --zapbg: #eafaff;
      --zapbg-dark: #f8f9fa;
    }
    html, body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(120deg, var(--zapbg-dark) 60%, var(--zapbg) 100%);
      margin: 0;
      padding: 0;
      min-height: 100vh;
      color: #1a2330;
    }
    header.navbar {
      background: #fff;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 50px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      position: fixed;
      top: 0;
      width: 100%;
      height: 80px;
      z-index: 1000;
      opacity: 0;
      transform: translateY(-40px) scale(0.98);
      transition: opacity 0.7s cubic-bezier(.4,0,.2,1), transform 0.7s cubic-bezier(.4,0,.2,1);
      box-sizing: border-box;
    }
    header.navbar.visible {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    .logo-area,
    .logo-bar {
      display: flex;
      align-items: center;
      gap: 14px;
    }
    .logo-img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #fff;
      box-shadow: 0 4px 16px rgba(26,209,255,0.10);
      border: 3px solid var(--zapblue);
      object-fit: cover;
      margin-right: 10px;
      transition: none;
      display: block;
    }
    .logo-img:hover {
      border-color: var(--zapblue);
    }
    .logo-area span,
    .logo-bar span {
      font-size: 24px;
      font-weight: bold;
      line-height: 1;
    }
    .btn-access {
      background-color: var(--zapblue);
      color: #fff;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      text-decoration: none;
      transition: background-color 0.3s;
      cursor: pointer;
    }
    .btn-access:hover {
      background-color: var(--zapdark);
    }
    /* Survey Box */
    .survey-box {
      max-width: 700px;
      background: #fff;
      margin: 110px auto 50px auto;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0px 4px 15px rgba(0,0,0,0.1);
    }
    .survey-box h2 {
      text-align: center;
      color: var(--zapdark);
      margin-bottom: 20px;
      font-size: 2rem;
      font-family: 'Segoe UI Semibold', 'Segoe UI', Arial, sans-serif;
      letter-spacing: 0.5px;
    }
    label {
      display: block;
      margin: 18px 0 7px 0;
      font-weight: 700;
      color: var(--zapdark); /* Question: dark and bold */
      font-size: 1.13rem;
      font-family: 'Segoe UI Semibold', 'Segoe UI', Arial, sans-serif;
      letter-spacing: 0.1px;
    }
    .radio-item label,
    .checkbox-item label {
      margin-top: 2px;
      font-weight: 400;
      font-size: 1rem;
      color: #6c7a89; /* Answer: lighter color */
      min-width: 0;
      flex-shrink: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
    }
    input[type="text"],
    input[type="email"],
    textarea,
    select {
      color: #34495e; /* Lighter than question, but readable */
      background: var(--zapbg);
      padding: 10px;
      margin-top: 5px;
      border-radius: 8px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    textarea {
      resize: vertical;
    }
    .radio-group, .checkbox-group {
      margin-top: 0;
      margin-bottom: 0;
      padding-left: 2px;
    }
    .radio-item, .checkbox-item {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 2px; /* Reduced space between answers */
      font-size: 1rem;
      font-family: 'Segoe UI', Arial, sans-serif;
      line-height: 1.1;
    }
    .radio-group .radio-item:last-child,
    .checkbox-group .checkbox-item:last-child {
      margin-bottom: 0;
    }
    .other-textbox-wrap {
      margin-top: 8px;
      margin-bottom: 14px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      width: 100%;
    }
    .other-textbox {
      width: 100%;
      max-width: 350px;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1.5px solid var(--zapblue);
      background: var(--zapbg);
      color: var(--zapdark);
      font-size: 1rem;
      margin-top: 5px;
      transition: border-color 0.2s, box-shadow 0.2s;
      box-sizing: border-box;
      outline: none;
      font-family: 'Segoe UI', Arial, sans-serif;
    }
    .other-textbox:focus {
      border-color: var(--zapdark);
      box-shadow: 0 0 0 2px #1ad1ff33;
      background: #fff;
    }
    .submit-btn {
      margin-top: 30px;
      width: 100%;
      padding: 14px;
      font-size: 1.13rem;
      background: var(--zapblue);
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.3s;
      font-weight: bold;
      font-family: 'Segoe UI Semibold', 'Segoe UI', Arial, sans-serif;
      letter-spacing: 0.2px;
    }
    .submit-btn:hover {
      background-color: var(--zapdark);
    }
    footer {
      margin-top: 50px;
      padding: 15px;
      text-align: center;
      font-size: 14px;
      color: #fff;
      background: var(--zapdark);
      border-top-left-radius: 30px;
      border-top-right-radius: 30px;
    }
    /* Avatar dropdown styles to match other pages */
    .dropdown {
      position: relative;
      display: flex;
      align-items: center;
      margin-left: 10px;
    }
    .dropdown-avatar {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      border: 2px solid var(--zapblue);
      object-fit: cover;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
      transition: box-shadow 0.25s, transform 0.25s, border-color 0.25s;
      background: #fff;
    }
    .dropdown-avatar:hover {
      box-shadow: 0 8px 24px rgba(26,209,255,0.18);
      transform: scale(1.12) rotate(-7deg);
      border-color: var(--zapdark);
    }
    .dropdown-menu {
      position: absolute;
      top: 54px;
      right: 0;
      background: #fff;
      box-shadow: 0 12px 32px rgba(0,0,0,0.13);
      border-radius: 14px;
      min-width: 170px;
      display: none;
      flex-direction: column;
      overflow: hidden;
      z-index: 1001;
      animation: dropdownIn 0.35s cubic-bezier(.4,0,.2,1);
      transform-origin: top right;
    }
    @keyframes dropdownIn {
      from { opacity: 0; transform: scaleY(0.7) translateY(-10px);}
      to { opacity: 1; transform: scaleY(1) translateY(0);}
    }
    @keyframes dropdownOut {
      from { opacity: 1; transform: scaleY(1) translateY(0);}
      to { opacity: 0; transform: scaleY(0.7) translateY(-10px);}
    }
    .dropdown-menu.show {
      display: flex;
      animation: dropdownIn 0.35s cubic-bezier(.4,0,.2,1);
    }
    .dropdown-menu.hide {
      animation: dropdownOut 0.25s cubic-bezier(.4,0,.2,1);
    }
    .dropdown-menu a {
      padding: 14px 22px;
      color: var(--zapblue);
      text-decoration: none;
      font-weight: 500;
      font-size: 16px;
      transition: background 0.2s, color 0.2s;
      border-bottom: 1px solid #f1f1f1;
    }
    .dropdown-menu a:last-child {
      border-bottom: none;
    }
    .dropdown-menu a:hover {
      background: #f5faff;
      color: var(--zapdark);
    }
    /* Modern fade/slide animation for survey box and sections */
    .scroll-fade {
      opacity: 0;
      transform: translateY(40px) scale(0.98);
      transition: opacity 0.7s cubic-bezier(.4,0,.2,1), transform 0.7s cubic-bezier(.4,0,.2,1);
      will-change: opacity, transform;
    }
    .scroll-fade.visible {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    .scroll-fade-left {
      opacity: 0;
      transform: translateX(-60px) scale(0.98);
      transition: opacity 0.7s cubic-bezier(.4,0,.2,1), transform 0.7s cubic-bezier(.4,0,.2,1);
      will-change: opacity, transform;
    }
    .scroll-fade-left.visible {
      opacity: 1;
      transform: translateX(0) scale(1);
    }
    .scroll-fade-right {
      opacity: 0;
      transform: translateX(60px) scale(0.98);
      transition: opacity 0.7s cubic-bezier(.4,0,.2,1), transform 0.7s cubic-bezier(.4,0,.2,1);
      will-change: opacity, transform;
    }
    .scroll-fade-right.visible {
      opacity: 1;
      transform: translateX(0) scale(1);
    }
    @media (max-width: 900px) {
      header.navbar {
        padding: 0 20px;
      }
      .survey-box {
        margin: 100px 8px 30px 8px;
        padding: 18px 8px;
      }
    }

    .radio-item,
    .checkbox-item {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 2px; /* Reduced space between answers */
    }
    .radio-item textarea,
    .checkbox-item textarea {
      font-size: 15px;
      padding: 7px 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      background: var(--zapbg);
      color: #222;
      margin-top: 0;
      min-height: 32px;
      max-width: 260px;
      width: 100%;
      box-sizing: border-box;
    }
    .radio-item label,
    .checkbox-item label {
      margin-top: 2px;
      font-weight: normal;
      font-size: 15px;
      color: var(--zapdark);
      min-width: 0;
      flex-shrink: 0;
    }
    .radio-item input[type="radio"],
    .checkbox-item input[type="checkbox"] {
      margin-top: 3px;
    }
    .other-textbox-wrap {
      margin-top: 10px;
      margin-bottom: 18px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      width: 100%;
    }
    .other-textbox {
      width: 100%;
      max-width: 350px;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1.5px solid var(--zapblue);
      background: var(--zapbg);
      color: var(--zapdark);
      font-size: 15px;
      margin-top: 5px;
      transition: border-color 0.2s, box-shadow 0.2s;
      box-sizing: border-box;
      outline: none;
    }
    .other-textbox:focus {
      border-color: var(--zapdark);
      box-shadow: 0 0 0 2px #1ad1ff33;
      background: #fff;
    }
    .survey-question {
      margin-bottom: 32px;
      padding-bottom: 18px;
      border-bottom: 1.5px solid #eafaff;
    }
    .survey-question:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header class="navbar scroll-fade">
    <div class="logo-area logo-bar">
      <img src="icons/your-logo.png" alt="Logo" class="logo-img" />
      <span style="font-size:24px; font-weight:bold; line-height:1;">
        <span style="color:#1ad1ff;">Zap</span><span style="color:#0056b3;">Bundle</span>
      </span>
    </div>
    <div id="nav-button-area"></div>
  </header>
  
  <!-- Survey Form -->
  <div class="survey-box scroll-fade">
    <h2>Take the Survey</h2>
    <form action="https://formsubmit.co/your-email@example.com" method="POST" onsubmit="handleSurveySubmit(event)">
      <input type="hidden" name="_format" value="xml" />

      <div class="survey-question">
        <!-- 1. Company Type (Mandatory) -->
        <label>1. What best describes your company type? <span style="color:#ff416c;">*</span></label>
        <div class="radio-group">
          <div class="radio-item"><input type="radio" name="company_type" value="Startup" id="startup" required><label for="startup">Startup</label></div>
          <div class="radio-item"><input type="radio" name="company_type" value="Small Business" id="smallbiz"><label for="smallbiz">Small Business</label></div>
          <div class="radio-item"><input type="radio" name="company_type" value="Marketing Agency" id="agency"><label for="agency">Marketing Agency</label></div>
          <div class="radio-item"><input type="radio" name="company_type" value="Product Company" id="product"><label for="product">Product Company</label></div>
          <div class="radio-item"><input type="radio" name="company_type" value="Freelance/Consultant" id="freelance"><label for="freelance">Freelance/Consultant</label></div>
        </div>
        <div class="other-textbox-wrap">
          <label for="company_type_other" style="font-weight:normal; color:var(--zapdark); margin-top:10px;">Other company type:</label>
          <input type="text" name="company_type_other" id="company_type_other" class="other-textbox" placeholder="Type here if other..." />
        </div>
      </div>

      <div class="survey-question">
        <!-- 2. Number of SaaS Tools (Mandatory) -->
        <label>2. How many SaaS tools are you currently subscribed to? <span style="color:#ff416c;">*</span></label>
        <div class="radio-group">
          <div class="radio-item"><input type="radio" name="saas_count" value="1–3" required><label>1–3</label></div>
          <div class="radio-item"><input type="radio" name="saas_count" value="4–7"><label>4–7</label></div>
          <div class="radio-item"><input type="radio" name="saas_count" value="8–10"><label>8–10</label></div>
          <div class="radio-item"><input type="radio" name="saas_count" value="More than 10"><label>More than 10</label></div>
        </div>
      </div>

      <div class="survey-question">
        <!-- 3. Types of SaaS Tools (Mandatory) -->
        <label>3. Which types of SaaS tools do you use most often? <span style="font-weight:normal;">(Select all that apply)</span> <span style="color:#ff416c;">*</span></label>
        <div class="checkbox-group">
          <div class="checkbox-item"><input type="checkbox" name="saas_types[]" value="Communication" required id="comm"><label for="comm">Communication (e.g., Slack, Zoom)</label></div>
          <div class="checkbox-item"><input type="checkbox" name="saas_types[]" value="Project Management" id="pm"><label for="pm">Project Management (e.g., Trello, Asana)</label></div>
          <div class="checkbox-item"><input type="checkbox" name="saas_types[]" value="Marketing Tools" id="mkt"><label for="mkt">Marketing Tools (e.g., Mailchimp, HubSpot)</label></div>
          <div class="checkbox-item"><input type="checkbox" name="saas_types[]" value="Design Tools" id="design"><label for="design">Design Tools (e.g., Figma, Canva)</label></div>
          <div class="checkbox-item"><input type="checkbox" name="saas_types[]" value="Development Tools" id="dev"><label for="dev">Development Tools (e.g., GitHub, AWS)</label></div>
          <div class="checkbox-item"><input type="checkbox" name="saas_types[]" value="Accounting/Finance Tools" id="acct"><label for="acct">Accounting/Finance Tools (e.g., QuickBooks, FreshBooks)</label></div>
        </div>
        <div class="other-textbox-wrap">
          <label for="saas_types_other" style="font-weight:normal; color:var(--zapdark); margin-top:10px;">Other SaaS tool types you use:</label>
          <input type="text" name="saas_types_other" id="saas_types_other" class="other-textbox" placeholder="Type here if any other..." />
        </div>
      </div>

      <div class="survey-question">
        <!-- 4. Average Monthly Spend -->
        <label>4. What is your average monthly spend on SaaS tools?</label>
        <div class="radio-group">
          <div class="radio-item"><input type="radio" name="monthly_spend" value="Less than ₹5,000" required><label>Less than ₹5,000</label></div>
          <div class="radio-item"><input type="radio" name="monthly_spend" value="₹5,000–₹10,000"><label>₹5,000–₹10,000</label></div>
          <div class="radio-item"><input type="radio" name="monthly_spend" value="₹10,000–₹25,000"><label>₹10,000–₹25,000</label></div>
          <div class="radio-item"><input type="radio" name="monthly_spend" value="₹25,000+"><label>₹25,000+</label></div>
        </div>
      </div>

      <div class="survey-question">
        <!-- 5. Biggest Challenge -->
        <label>5. What is your biggest challenge with managing SaaS subscriptions?</label>
        <div class="radio-group">
          <div class="radio-item"><input type="radio" name="challenge" value="Too expensive" required id="expensive"><label for="expensive">Too expensive</label></div>
          <div class="radio-item"><input type="radio" name="challenge" value="Managing multiple accounts and billing cycles" id="multiacc"><label for="multiacc">Managing multiple accounts and billing cycles</label></div>
          <div class="radio-item"><input type="radio" name="challenge" value="Finding the right tools" id="righttools"><label for="righttools">Finding the right tools</label></div>
          <div class="radio-item"><input type="radio" name="challenge" value="Lack of bundled discounts" id="nobundle"><label for="nobundle">Lack of bundled discounts</label></div>
        </div>
        <div class="other-textbox-wrap">
          <label for="challenge_other" style="font-weight:normal; color:var(--zapdark); margin-top:10px;">Other challenge:</label>
          <input type="text" name="challenge_other" id="challenge_other" class="other-textbox" placeholder="Type here if other..." required />
        </div>
      </div>

      <div class="survey-question">
        <!-- 6. Interest in Bundles -->
        <label>6. Would you be interested in curated SaaS bundles at a discounted price?</label>
        <div class="radio-group">
          <div class="radio-item"><input type="radio" name="interest_bundles" value="Yes, definitely!" required><label>Yes, definitely!</label></div>
          <div class="radio-item"><input type="radio" name="interest_bundles" value="Maybe, depends on the bundle."><label>Maybe, depends on the bundle.</label></div>
          <div class="radio-item"><input type="radio" name="interest_bundles" value="No, I prefer individual subscriptions."><label>No, I prefer individual subscriptions.</label></div>
        </div>
      </div>

      <div class="survey-question">
        <!-- 7. Early Access Program -->
        <label>7. If we could save you up to 30% on your SaaS spend, would you join our early access program?</label>
        <div class="radio-group">
          <div class="radio-item"><input type="radio" name="early_access" value="Yes" required><label>Yes</label></div>
          <div class="radio-item"><input type="radio" name="early_access" value="Maybe"><label>Maybe</label></div>
          <div class="radio-item"><input type="radio" name="early_access" value="No"><label>No</label></div>
        </div>
      </div>

      <div class="survey-question">
        <!-- 8. Email Address (Mandatory) -->
        <label for="email"><b>8. Enter your Email Address:</b> <span style="color:#ff416c;">*</span></label>
        <input type="email" name="email" id="email" placeholder="your@email.com" required>
      </div>

      <div class="survey-question">
        <!-- 9. Company Name (Optional) -->
        <label for="company_name">9. Company Name: <span style="font-weight:normal;">(Optional but recommended)</span></label>
        <input type="text" name="company_name_optional" id="company_name" placeholder="Enter your company name...">
      </div>

      <button type="submit" class="submit-btn">Submit Survey</button>
    </form>
  </div>

  <!-- Footer -->
  <footer class="scroll-fade">
    © 2025 ZapBundle. All rights reserved.<br>
    Helping businesses Save on SaaS since day one.
  </footer>

  <!-- Access Check + Logout Logic -->
  <script>
    if (localStorage.getItem('isLoggedIn') !== 'true') {
      alert("Please log in to access the survey.");
      window.location.href = "signup.html";
    }
  
    function markSurveyComplete() {
      const profile = JSON.parse(localStorage.getItem('userProfile') || '{}');
      profile.hasTakenSurvey = true;
      localStorage.setItem('userProfile', JSON.stringify(profile));
      localStorage.setItem('hasTakenSurvey', 'true');
    }
  
    function renderProfileNav() {
      const userData = JSON.parse(localStorage.getItem('userProfile')) || {};
      const profilePic = userData.profilePic || 'icons/default-profile.png';
  
      document.getElementById('nav-button-area').innerHTML = `
        <div class="dropdown" id="dropdown" style="position: relative;">
          <img id="navProfilePic" class="dropdown-avatar" src="${profilePic}" alt="Profile" />
          <div class="dropdown-menu" id="dropdownMenu">
            <a href="index.html">Home</a>
            <a href="profile.html">Profile</a>
            <a href="index.html#contact-us">Contact Us</a>
            <a href="#" onclick="logout()">Logout</a>
          </div>
        </div>`;
    }
  
    function toggleDropdown() {
      const menu = document.getElementById('dropdown-menu');
      if (menu) {
        menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
      }
    }
  
    function logout() {
      localStorage.removeItem('isLoggedIn');
      localStorage.removeItem('hasTakenSurvey');
      localStorage.removeItem('userProfile');
      window.location.href = "index.html";
    }
  
    function handleSurveySubmit(event) {
      event.preventDefault(); // Prevent default form submission
  
      // Mark user as having completed the survey
      const profile = JSON.parse(localStorage.getItem('userProfile') || '{}');
      profile.hasTakenSurvey = true;
      localStorage.setItem('userProfile', JSON.stringify(profile));
      localStorage.setItem('hasTakenSurvey', 'true');
  
      alert("Survey submitted! Thank you.");
      window.location.href = "index.html";
    }
  
    // Animate on scroll
    function revealOnScroll() {
      const reveals = document.querySelectorAll('.scroll-fade, .scroll-fade-left, .scroll-fade-right');
      const windowHeight = window.innerHeight;
      reveals.forEach(el => {
        const top = el.getBoundingClientRect().top;
        if (top < windowHeight - 60) {
          el.classList.add('visible');
        } else {
          el.classList.remove('visible');
        }
      });
    }
    window.addEventListener('scroll', revealOnScroll);
    window.addEventListener('DOMContentLoaded', revealOnScroll);

    // Avatar dropdown logic (matches other pages)
    function renderProfileNav() {
      const navArea = document.getElementById('nav-button-area');
      const userData = JSON.parse(localStorage.getItem('userProfile')) || {};
      const profilePic = userData.profilePic || 'icons/default-profile.png';
      navArea.innerHTML = `
        <div class="dropdown" id="dropdown" style="position: relative;">
          <img id="navProfilePic" class="dropdown-avatar" src="${profilePic}" alt="Profile" />
          <div class="dropdown-menu" id="dropdownMenu">
            <a href="index.html">Home</a>
            <a href="profile.html">Profile</a>
            <a href="index.html#contact-us">Contact Us</a>
            <a href="#" onclick="logout()">Logout</a>
          </div>
        </div>
      `;

      // Attach dropdown logic
      const dropdown = document.getElementById('dropdown');
      const dropdownMenu = document.getElementById('dropdownMenu');
      const navProfilePic = document.getElementById('navProfilePic');
      navProfilePic.addEventListener('click', function(e) {
        e.stopPropagation();
        if (dropdownMenu.classList.contains('show')) {
          dropdownMenu.classList.remove('show');
          dropdownMenu.classList.add('hide');
          setTimeout(() => dropdownMenu.style.display = 'none', 250);
        } else {
          dropdownMenu.style.display = 'flex';
          dropdownMenu.classList.remove('hide');
          setTimeout(() => dropdownMenu.classList.add('show'), 10);
        }
      });
      document.addEventListener('click', function(e) {
        if (!dropdown.contains(e.target) && dropdownMenu.classList.contains('show')) {
          dropdownMenu.classList.remove('show');
          dropdownMenu.classList.add('hide');
          setTimeout(() => dropdownMenu.style.display = 'none', 250);
        }
      });
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && dropdownMenu.classList.contains('show')) {
          dropdownMenu.classList.remove('show');
          dropdownMenu.classList.add('hide');
          setTimeout(() => dropdownMenu.style.display = 'none', 250);
        }
      });
    }

    function logout() {
      localStorage.removeItem('isLoggedIn');
      localStorage.removeItem('hasTakenSurvey');
      localStorage.removeItem('userProfile');
      window.location.href = "index.html";
    }

    // Call on DOMContentLoaded
    window.addEventListener('DOMContentLoaded', function() {
      renderProfileNav();
      revealOnScroll();
    });

    // Allow unchecking checkboxes on click (toggle)
    document.addEventListener('DOMContentLoaded', function() {
      // Existing calls
      renderProfileNav();
      revealOnScroll();

      // Toggle checkboxes on click
      document.querySelectorAll('.checkbox-group input[type="checkbox"]').forEach(function(checkbox) {
        checkbox.addEventListener('click', function(e) {
          if (this.checked && this.dataset.wasChecked === "true") {
            this.checked = false;
          }
          this.dataset.wasChecked = this.checked ? "true" : "false";
        });
        // Reset state on mouseup (for keyboard navigation)
        checkbox.addEventListener('blur', function() {
          this.dataset.wasChecked = this.checked ? "true" : "false";
        });
      });

      // Toggle radios on click (allow unchecking by clicking again)
      document.querySelectorAll('.radio-group input[type="radio"]').forEach(function(radio) {
        radio.addEventListener('click', function(e) {
          if (this.checked && this.dataset.wasChecked === "true") {
            this.checked = false;
          }
          this.dataset.wasChecked = this.checked ? "true" : "false";
        });
        radio.addEventListener('blur', function() {
          this.dataset.wasChecked = this.checked ? "true" : "false";
        });
      });
    });
  </script>
</body>
</html>
